<app-main-layout>
  

  <!-- Dashboard Content -->
  <div class="dashboard-content">

    <!-- Dashboard Header Section -->
    <app-dashboard-header
      [isExporting]="isExporting"
      (exportClick)="onDashboardExport()"
      (resetClick)="onDashboardReset()"
      (reportsClick)="goToReports()">
    </app-dashboard-header>

    <!-- KPI Dashboard Section -->
    <app-kpi-dashboard
      [kpiCards]="kpiCards"
      [loading]="isDashboardLoading"
      (kpiCardClick)="onKpiCardClick($event)">
    </app-kpi-dashboard>

    <!-- Enhanced Filter Panel -->
    <div class="section">
      <app-filter-panel 
        title="Report Filters"
        subtitle="Customize your data view"
        icon="tune"
        [filterConfigs]="filterConfigs"
        [collapsible]="true"
        [initiallyExpanded]="true"
        (filterChange)="onFilterChange($event)"
        (filtersReset)="onFiltersReset()">
      </app-filter-panel>
    </div>

    <!-- Worker Reports Table Section -->
    <app-worker-reports-table
      [reports]="workerReports"
      [loading]="isDashboardLoading"
      [totalWorkers]="workers.length"
      [totalHours]="getTotalHours()"
      (workerClick)="onWorkerClick($event)"
      (exportClick)="onWorkerReportsExport()"
      (refreshClick)="onWorkerReportsRefresh()">
    </app-worker-reports-table>

    <!-- Individual Entries -->
    <div *ngIf="selectedWorkerEntries.length > 0" class="individual-entries-section section">
      <mat-card class="entries-card mat-elevation-z2">
        <mat-card-header class="entries-header">
          <mat-card-title class="entries-title">
            <div class="title-content">
              <span class="title-text">Individual Time Entries - {{ getSelectedWorkerName() }}</span>
              <button mat-icon-button (click)="clearWorkerSelection()" class="close-button">
                <mat-icon>close</mat-icon>
              </button>
            </div>
          </mat-card-title>
        </mat-card-header>
        
        <mat-card-content class="entries-content">
          <app-advanced-data-table
            [data]="getIndividualEntriesTableData()"
            [columns]="individualEntriesColumns"
            [config]="individualEntriesConfig"
            [actions]="individualEntriesActions"
            [loading]="isTableLoading"
            emptyMessage="No time entries available"
            loadingMessage="Loading time entries...">
          </app-advanced-data-table>
        </mat-card-content>
      </mat-card>
    </div>


    <!-- All Workers Panel -->
    <div *ngIf="selectedWorkerId === 'all_workers'" class="all-workers-section section">
      <mat-card class="workers-card mat-elevation-z2">
        <mat-card-header class="workers-header">
          <mat-card-title class="workers-title">
            <div class="title-content">
              <span class="title-text">All Workers ({{ workers.length }})</span>
              <button mat-icon-button (click)="clearWorkerSelection()" class="close-button">
                <mat-icon>close</mat-icon>
              </button>
            </div>
          </mat-card-title>
        </mat-card-header>
        
        <mat-card-content class="workers-content">
          <app-advanced-data-table
            [data]="getAllWorkersTableData()"
            [columns]="allWorkersColumns"
            [config]="allWorkersConfig"
            [actions]="allWorkersActions"
            [loading]="isTableLoading"
            emptyMessage="No workers available"
            loadingMessage="Loading workers...">
          </app-advanced-data-table>
        </mat-card-content>
      </mat-card>
    </div>

  </div>

</app-main-layout>